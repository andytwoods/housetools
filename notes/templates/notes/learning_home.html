{% extends 'base.html' %}

{% block title %}
  Child Page Title
{% endblock %}

{% block css %}
  {{ block.super }}
  <style>
    .btn-divider {
      width: 4px;
      background-color: #ddd; /* Divider color */
      display: inline-block; /* Keeps the divider inline with buttons */
    }
  </style>
{% endblock css %}

{% block content %}
  <h2>Learning Manager</h2>
  <div class="row mb-3" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    {% for learningscenario in learningscenarios %}
      <div class="col-md-6" id="learningscenario-{{ learningscenario.id }}">
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">
              {{ learningscenario.instrument }}
              <a class='small' href="{% url 'edit-learning-scenario' pk=learningscenario.id %}">edit</a>
              <button
                class="btn btn-sm position-absolute top-0 end-0 m-1 text-danger"
                hx-post="{{ request.path }}"
                hx-target="#learningscenario-{{ learningscenario.id }}"
                hx-swap="outerHTML"
                hx-confirm="Are you sure you want to delete this item?"
                hx-vals='{"action": "delete", "id": {{ learningscenario.id }}}'
              >
                Delete
              </button>
            </h5>
            <div class="card-text">
              <div>
                <div class="btn-group btn-group-sm" role="group" aria-label="Button panel">
                  <!-- Main Practice Button -->
                  <a class="btn btn-primary btn-sm" href='{% url "practice" learningscenario_id=learningscenario.id %}'
                     aria-label="Play the selected item">
                    <i class="fas fa-play"></i> Practice
                  </a>

                  <!-- Dropdown Button -->
                  <button type="button" class="btn btn-primary btn-sm dropdown-toggle dropdown-toggle-split"
                          data-bs-toggle="dropdown"
                          aria-expanded="false" aria-label="More practice options">
                    <span class="visually-hidden">Toggle Dropdown</span>
                  </button>

                  <!-- Dropdown Menu -->
                  <ul class="dropdown-menu">
                    <li>
                      <a class="dropdown-item" href="{% url 'practice-sound' learningscenario_id=learningscenario.id %}">
                        <i class="fas fa-microphone"></i> Mic-based practice
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="card-footer text-muted small mt-3">
              <div>
                {{ learningscenario.clef }} clef
              </div>
              Last practiced: <span class="badge rounded-pill bg-secondary">{{ learningscenario.last_practiced }}</span>
              <br>
              Days-old: <span class="badge rounded-pill bg-secondary">{{ learningscenario.days_old }}</span>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  <a href="{% url 'new-learning-scenario' %}" class="btn btn-primary btn-lg">
    <i class="fas fa-plus"></i> Set up a new learning scenario
  </a>


{% endblock content %}
